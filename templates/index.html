<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hamburg Unfallkarte</title>

    <!-- CSS laden -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css" rel="stylesheet" />

    <!-- JavaScript-Bibliotheken -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js"></script>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body>
    <div id="top-bar">
        <div class="button-group">
            <button class="nav-button" onclick="toggleFiltersMenu()"><h3>Filter</h3></button>
            <button class="nav-button" onclick="toggleLegendMenu()"><h3>Legende</h3></button>
            <button class="nav-button" id="theme-toggle" onclick="toggleTheme()"><h3>Standard</h3></button>
            <button class="nav-button" id="mode-toggle" onclick="toggleModeChange()"><h3>Punkte</h3></button>
            <select id="district-select" class="nav-button" onchange="flyToDistrict()">
                <option value="">WÃ¤hle ein Bezirk</option>
                <optgroup label="EimsbÃ¼ttel">
                    <option value="EimsbÃ¼ttel-Schanzenviertel">Schanzenviertel</option>
                    <option value="EimsbÃ¼ttel-Hoheluft-West">Hoheluft-West</option>
                    <option value="EimsbÃ¼ttel-Eppendorf">Eppendorf</option>
                </optgroup>
                <optgroup label="Altona">
                    <option value="Altona-Ottensen">Ottensen</option>
                    <option value="Altona-Altona-Altstadt">Altona-Altstadt</option>
                    <option value="Altona-Bahrenfeld">Bahrenfeld</option>                </optgroup>
                <optgroup label="Hamburg-Mitte">
                    <option value="Hamburg-Mitte-St. Pauli">St. Pauli</option>
                    <option value="Hamburg-Mitte-HafenCity">HafenCity</option>
                    <option value="Hamburg-Mitte-Altstadt">Altstadt</option>
                </optgroup>
                <optgroup label="Hamburg-Nord">
                    <option value="Hamburg-Nord-Winterhude">Winterhude</option>
                    <option value="Hamburg-Nord-Barmbek">Barmbek</option>
                    <option value="Hamburg-Nord-FuhlsbÃ¼ttel">FuhlsbÃ¼ttel</option>
                </optgroup>
                <optgroup label="Wandsbek">
                    <option value="Wandsbek-Rahlstedt">Rahlstedt</option>
                    <option value="Wandsbek-Wandsbek">Wandsbek</option>
                    <option value="Wandsbek-Bramfeld">Bramfeld</option>
                </optgroup>
                <optgroup label="Bergedorf">
                    <option value="Bergedorf-Bergedorf">Bergedorf</option>
                    <option value="Bergedorf-Billstedt">Billstedt</option>
                    <option value="Bergedorf-LohbrÃ¼gge">LohbrÃ¼gge</option>
                </optgroup>
                <optgroup label="Harburg">
                    <option value="Harburg-Harburg">Harburg</option>
                    <option value="Harburg-Neugraben-Fischbek">Neugraben-Fischbek</option>
                    <option value="Harburg-Finkenwerder">Finkenwerder</option>
                </optgroup>
            </select>
        </div>
        <div class="title-container">
            <h1 class="title-right">UnfÃ¤lle</h1>
            <a href="https://www.uni-hamburg.de"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/98/UHH_UniversitÃ¤t_Hamburg_Logo.svg/600px-UHH_UniversitÃ¤t_Hamburg_Logo.svg.png" alt="UniversitÃ¤t Hamburg Logo" class="uhh-logo"></a>
        </div>
    </div>

    <!-- Map Container -->
    <div id="map-container">
        <div id="map"></div>
        <div id="sidebar-toggle" onclick="toggleSidebar()"></div>
    </div>

    <!-- Filters Menu -->
    <div id="filters-menu" class="slide-menu">
        <div class="menu-header">
            <h2>Filter</h2>
            <button class="close-btn" onclick="toggleFiltersMenu()">âœ•</button>
        </div>
        <form id="filter-form" style="padding: 20px;">
            <label for="filter-start-date" style="display: block; margin-bottom: 5px; font-weight: bold;">Start Date:</label>
            <input type="date" id="filter-start-date" name="filter-start-date" style="width: calc(100% - 22px); padding: 8px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px;">

            <label for="filter-end-date" style="display: block; margin-bottom: 5px; font-weight: bold;">End Date:</label>
            <input type="date" id="filter-end-date" name="filter-end-date" style="width: calc(100% - 22px); padding: 8px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px;">
            <label>
                <input type="checkbox" name="type" value="UNFALL" checked onchange="checkFilters(this)"> UnfÃ¤lle
            </label>
            <label>
                <input type="checkbox" name="type" value="AuthorityOperation" checked onchange="checkFilters(this)"> BehÃ¶rdliche EinsÃ¤tze
            </label>
        </form>
    </div>

    <!-- Legend Menu -->
    <div id="legend-menu" class="slide-menu">
        <div class="menu-header">
            <h2>Legende</h2>
            <button class="close-btn" onclick="toggleLegendMenu()">âœ•</button>
        </div>
        <div style="padding: 20px;">
            <h4>Date Filter:</h4>
            <p style="font-size: 0.9em; color: #555; margin-bottom: 15px;">
                Use the 'Start Date' and 'End Date' selectors in the 'Filters' menu to display events that occurred within a specific time period.
            </p>

            <hr style="margin: 20px 0;">

            <h4>Marker Appearance (by Age):</h4>
            <p style="font-size: 0.9em; color: #555; margin-bottom: 15px;">Markers change color and transparency based on how old the event is.</p>
            <ul style="list-style-type: none; padding-left: 0;">
                <li style="margin-bottom: 10px; display: flex; align-items: center;">
                    <span style="display: inline-block; width: 15px; height: 15px; border-radius: 50%; background-color: rgb(0, 255, 0); border: 1px solid #ccc; margin-right: 10px;"></span>
                    <div><strong>Today / Future:</strong> Bright Green (Full Opacity)</div>
                </li>
                <li style="margin-bottom: 10px; display: flex; align-items: center;">
                    <span style="display: inline-block; width: 15px; height: 15px; border-radius: 50%; background-image: linear-gradient(to right, rgb(0, 255, 0), rgb(255, 255, 0)); border: 1px solid #ccc; margin-right: 10px;"></span>
                    <div><strong>Up to 1 Week Old:</strong> Green to Yellow (Opacity: 0.9)</div>
                </li>
                <li style="margin-bottom: 10px; display: flex; align-items: center;">
                    <span style="display: inline-block; width: 15px; height: 15px; border-radius: 50%; background-image: linear-gradient(to right, rgb(255, 255, 0), rgb(255, 0, 0)); border: 1px solid #ccc; margin-right: 10px;"></span>
                    <div><strong>1 to 2 Weeks Old:</strong> Yellow to Red (Opacity: 0.8)</div>
                </li>
                <li style="margin-bottom: 10px; display: flex; align-items: center;">
                    <span style="display: inline-block; width: 15px; height: 15px; border-radius: 50%; background-image: linear-gradient(to right, rgb(255, 0, 0), rgb(128, 128, 128)); border: 1px solid #ccc; margin-right: 10px;"></span>
                    <div><strong>2 Weeks to 1 Month Old:</strong> Red to Grey (Opacity: 0.65)</div>
                </li>
                <li style="margin-bottom: 10px; display: flex; align-items: center;">
                    <span style="display: inline-block; width: 15px; height: 15px; border-radius: 50%; background-color: rgb(200, 200, 200); border: 1px solid #ccc; margin-right: 10px;"></span>
                    <div><strong>Older than 1 Month:</strong> Light Grey (Opacity: 0.5)</div>
                </li>
            </ul>
        </div>
    </div>

    <!-- Sidebar fÃ¼r neueste Events -->
    <div id="latest-events-sidebar" class="slide-menu">
        <div class="menu-header">
            <h2>Letzte Ereignisse</h2>
            <button class="close-btn" onclick="toggleLatestEventsSidebar()">âœ•</button>
        </div>
        <div id="latest-events-content">
            <p>Keine Ereignisse vorhanden.</p>
        </div>
    </div>
    
    <!-- Sidebar -->
    <div id="sidebar">
        <div class="close-btn" onclick="toggleSidebar()">âœ•</div>
        <h2 id="details">Details zu Ereignissen</h2>
        <div id="event-content">
            <p>WÃ¤hle eine Ereignis aus, um Details zu sehen.</p>
        </div>
    </div>    <!-- Button to Open the Latest Events Sidebar -->
    <button id="latest-events-toggle" onclick="toggleLatestEventsSidebar()">Letzte Ereignisse</button>

    <!-- Rectangle Selection Toggle Button -->
    <button id="selection-toggle" onclick="toggleRectangleSelection()">ðŸ“¦ Auswahl</button>

    <!-- Eigenes JavaScript -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
